{% extends "base.html" %} {% block title %}Receipt #{{ id }}{% endblock %} {%
block content %}
<h1 class="text-3xl font-bold text-gray-800 mb-6">Receipt #{{ id }}</h1>

<div class="flex flex-col md:flex-row gap-8">
  <!-- Image Preview -->
  <div class="w-full md:w-1/2">
    <img
      src="{{ presigned_url }}"
      alt="Receipt Image"
      class="rounded-lg border border-gray-300 shadow"
    />
  </div>

  <!-- Details -->
  <div class="w-full md:w-1/2 space-y-6">
    <!-- Summary Info -->
    <div>
      <h2 class="text-xl font-semibold text-gray-700 mb-2">Summary</h2>
      <ul class="bg-white rounded border divide-y divide-gray-200 text-sm">
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Restaurant</span>
          <span class="text-gray-600">{{ data.restaurant }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Address</span>
          <span class="text-gray-600">{{ data.address }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Order Number</span>
          <span class="text-gray-600">{{ data.order_number }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Order Type</span>
          <span class="text-gray-600 capitalize">{{ data.order_type }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Table Number</span>
          <span class="text-gray-600">{{ data.table_number }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Server</span>
          <span class="text-gray-600">{{ data.server }}</span>
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Opened</span>
          <span class="text-gray-600"
            >{{ data.opened.strftime('%Y-%m-%d %H:%M') if data.opened else 'Not
            found' }}</span
          >
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Subtotal</span>
          <span class="text-gray-600"
            >${{ '%.2f' | format(data.subtotal) }}</span
          >
        </li>
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">Tax</span>
          <span class="text-gray-600"
            >${{ '%.2f' | format(data.sales_tax) }}</span
          >
        </li>
        <li class="flex justify-between p-3 font-bold">
          <span class="text-gray-800">Total</span>
          <span class="text-gray-800">${{ '%.2f' | format(data.total) }}</span>
        </li>
      </ul>
    </div>

    <!-- Items -->
    <div>
      <h2 class="text-xl font-semibold text-gray-700 mb-2">Items</h2>
      <ul class="bg-white rounded border divide-y divide-gray-200">
        {% for item in data["items"] %}
        <li class="flex justify-between p-3">
          <div>
            <span class="font-medium text-gray-800">{{ item.name }}</span>
            <span class="text-sm text-gray-500 ml-2">x{{ item.quantity }}</span>
          </div>
          <span class="text-gray-600">${{ '%.2f' | format(item.price) }}</span>
        </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Fees -->
    <div>
      <h2 class="text-xl font-semibold text-gray-700 mb-2">Fees</h2>
      <ul class="bg-white rounded border divide-y divide-gray-200">
        {% for fee in data["fees"] %}
        <li class="flex justify-between p-3">
          <span class="font-medium text-gray-800">{{ fee.name }}</span>
          <span class="text-gray-600">${{ '%.2f' | format(fee.price) }}</span>
        </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Raw Text -->
    <div>
      <h2 class="text-xl font-semibold text-gray-700 mb-2">Raw Text</h2>
      <pre
        class="bg-white p-4 rounded border text-sm text-gray-700 overflow-x-auto"
      >
{{ data.raw_text }}</pre
      >
    </div>
  </div>
</div>
{% endblock %}
